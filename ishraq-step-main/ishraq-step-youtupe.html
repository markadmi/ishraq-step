<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ishraq Step - الدروس المرئية</title>
<link rel="stylesheet" href="css/video.css">
<link rel="icon" href="icon.jpg" type="image/x-icon">
<style>
  .sections {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
    padding: 15px;
  }

  .section-card {
    background: linear-gradient(135deg, #4caf50, #00eeff);
    color: white;
    border-radius: 14px;
    text-align: center;
    padding: 18px;
    cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    font-size: 18px;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(76, 175, 80, 0.4);
  }

  .section-card:hover {
    transform: translateY(-6px) scale(1.03);
    box-shadow: 0 8px 18px rgba(76, 175, 80, 0.6);
  }

  #videos-container {
    display: none;
    padding: 15px;
  }

  .back-btn {
    background: #4caf50;
    color: white;
    padding: 8px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    margin-bottom: 15px;
  }

  .video {
    margin-bottom: 20px;
    text-align: center;
  }

  .video iframe {
    width: 100%;
    max-width: 600px;
    height: 315px;
    border: none;
    border-radius: 10px;
  }
</style>
</head>
<body>

<header>📚 Ishraq Step - الدروس المرئية</header>

<!-- 🧭 الأقسام السبعة -->
<div id="sections-container" class="sections">
  <div class="section-card" data-type="math0">🧮 ماث 0</div>
  <div class="section-card" data-type="ماث 1">🧮 ماث 1</div>
  <div class="section-card" data-type="انجليزي">🇬🇧 إنجليزي</div>
  <div class="section-card" data-type="دوائر كهربائية">🔌 دوائر كهربائية</div>
  <div class="section-card" data-type="اخلاقيات المهنه">⚖️ أخلاقيات المهنة</div>
  <div class="section-card" data-type="مقدمة حاسب الي">💻 مقدمة حاسب آلي</div>
  <div class="section-card" data-type="كورسات اخرى">🧠 كورسات أخرى</div>
</div>

<!-- 🎥 قسم عرض الفيديوهات -->
<div id="videos-container">
  <button class="back-btn">⬅️ رجوع إلى الأقسام</button>
  <h2 id="section-title"></h2>
  <div id="videos-list"></div>
</div>

<footer>© 2025 Ishraq Step – جميع الحقوق محفوظة</footer>

<!-- Firebase -->
<script type="module">
  import { db } from './chat/js/fb.js';
  import { ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const sectionsContainer = document.getElementById('sections-container');
  const videosContainer = document.getElementById('videos-container');
  const videosList = document.getElementById('videos-list');
  const sectionTitle = document.getElementById('section-title');
  const backBtn = document.querySelector('.back-btn');

  let coursesData = {};

  // 🧠 تحميل كل الفيديوهات مرة واحدة من Firebase
  onValue(ref(db, 'courses'), snapshot => {
    coursesData = snapshot.val() || {};
  });

  // 📌 عند الضغط على قسم
  document.querySelectorAll('.section-card').forEach(card => {
    card.addEventListener('click', () => {
      const type = card.dataset.type;
      showSectionVideos(type);
    });
  });

  // 🟢 عرض الفيديوهات الخاصة بقسم معين
  function showSectionVideos(type) {
    sectionsContainer.style.display = 'none';
    videosContainer.style.display = 'block';
    sectionTitle.textContent = `🎓 ${type}`;

    videosList.innerHTML = '';

    const filtered = Object.values(coursesData).filter(item => item.type === type);

    if (filtered.length === 0) {
      videosList.innerHTML = '<p>🚧 لا توجد فيديوهات بعد لهذا القسم</p>';
      return;
    }

    filtered.forEach(video => {
      const div = document.createElement('div');
      div.className = 'video';
      div.innerHTML = `
        <iframe src="${video.url}" allowfullscreen></iframe>
        <h2>${video.title}</h2>
        <p>${video.description}</p>
      `;
      videosList.appendChild(div);
    });
  }

  // 🔙 زر الرجوع إلى الأقسام
  backBtn.addEventListener('click', () => {
    videosContainer.style.display = 'none';
    sectionsContainer.style.display = 'grid';
    sectionTitle.textContent = '';
    videosList.innerHTML = '';
  });
</script>

</body>
</html>
