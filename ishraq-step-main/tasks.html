<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù‡Ø§Ù… - Ishraq Step</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-orange: #ff8a00;
      --primary-yellow: #ffd166;
      --glass-bg: rgba(255, 255, 255, 0.03);
      --glass-border: rgba(255, 255, 255, 0.1);
      --success-green: #00b09b;
      --locked-color: #333;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #000;
      background-image: radial-gradient(circle at 50% 0%, #1a1a1a 0%, #000000 100%);
      min-height: 100vh;
      padding: 40px 20px; /* Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© */
      color: #fff;
      overflow-x: hidden;
    }

    .container { max-width: 800px; margin: 0 auto; position: relative; }

    .header { text-align: center; margin-bottom: 60px; }
    .header h1 { 
        font-size: 35px; /* Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£ØµÙ„ÙŠ Ø§Ù„ÙƒØ¨ÙŠØ± */
        background: linear-gradient(to right, var(--primary-yellow), var(--primary-orange));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .header p { font-size: 16px; color: #ccc; margin-top: 10px; }

    /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨Ø±ÙˆØ¬Ø±Ø³ Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ Ø§Ù„Ù…ØªØµÙ„ --- */
    .tasks-wrapper {
      position: relative;
      padding-right: 60px; 
    }

    /* Ø§Ù„Ø®Ø· Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ Ø§Ù„Ø®Ù„ÙÙŠ - ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„ÙŠØªÙˆØ³Ø· Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ØªÙ…Ø§Ù…Ø§Ù‹ */
    .vertical-line-bg {
      position: absolute;
      right: 83px; 
      top: 25px;
      bottom: 25px;
      width: 4px;
      background: rgba(255, 255, 255, 0.1);
      z-index: 0;
      border-radius: 2px;
    }

    /* Ø§Ù„Ø®Ø· Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù… */
    .vertical-line-fill {
      position: absolute;
      right: 83px;
      top: 25px;
      width: 4px;
      background: linear-gradient(to bottom, var(--success-green), var(--primary-orange));
      z-index: 1;
      transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 2px;
      height: 0%;
    }

    .task-item {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      position: relative;
      z-index: 2;
    }

    /* Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
    .task-number {
      width: 50px; 
      height: 50px;
      background: #111;
      border: 2px solid var(--locked-color);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 18px;
      margin-left: 30px;
      flex-shrink: 0;
      transition: 0.4s;
      color: #555;
    }

    /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© */
    .task-card {
      flex: 1;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      padding: 20px;
      border-radius: 18px;
      position: relative;
      overflow: hidden;
      transition: 0.3s;
      opacity: 0.5;
    }

    /* Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù†Ø´Ø·Ø© ÙˆØ§Ù„Ù…ÙƒØªÙ…Ù„Ø© */
    .task-card.active, .task-card.completed {
      opacity: 1;
    }
    
    .task-card.active {
      border-color: var(--primary-orange);
      box-shadow: 0 0 20px rgba(255, 138, 0, 0.1);
    }

    .task-card.completed {
      border-color: var(--success-green);
    }

    .task-item.is-completed .task-number {
      background: var(--success-green);
      border-color: var(--success-green);
      color: white;
      box-shadow: 0 0 15px rgba(0, 176, 155, 0.4);
    }

    .task-item.is-active .task-number {
      border-color: var(--primary-orange);
      color: var(--primary-orange);
    }

    .task-info h3 { font-size: 18px; margin-bottom: 5px; }
    .task-info p { font-size: 13px; color: #888; }

    /* Ø²Ø± Ø§Ù„ØªÙ†ÙÙŠØ° */
    .action-btn {
      display: inline-block;
      margin-top: 15px;
      padding: 10px 25px;
      background: var(--primary-orange);
      color: #fff;
      text-decoration: none;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 800;
      transition: 0.3s;
      border: none;
      cursor: pointer;
    }
    .action-btn:hover { transform: scale(1.05); background: #e67e00; }

    .lock-icon {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        opacity: 0.2;
    }

    /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù„Ù…Ø¹Ø§Ù† Ù„Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
    .task-card.active::before {
      content: '';
      position: absolute;
      top: 0; left: -150%;
      width: 100%; height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.05), rgba(255,255,255,0.1), transparent);
      animation: shimmer 4s infinite linear;
    }
    @keyframes shimmer {
      0% { left: -150%; }
      100% { left: 150%; }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="header">
      <h1>Ù…Ø³Ø§Ø± Ø¥Ø´Ø±Ø§Ù‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</h1>
      <p>Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ù„ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ</p>
    </div>

    <div class="tasks-wrapper">
      <div class="vertical-line-bg"></div>
      <div class="vertical-line-fill" id="lineFill"></div>
      <div id="tasksContainer"></div>
    </div>
  </div>

  <script type="module">
    const deviceId = localStorage.getItem('device_id');
    import { db } from './chat/js/fb.js'; 
    import { ref, update, get, child } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    dbRef = ref(db);
    const snapshot = await get(child(dbRef, `users`));
    if (snapshot.exists()) {
      const users = snapshot.val();
      const userKey = Object.keys(users).find(key => users[key].deviceId === deviceId);
      if(userKey){
       const userData = users[userKey];
       window.maxlanguage = Math.max(userData.java, userData.cpp, userData.javascript, userData.python);
      }

    }else {

      console.log("â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Firebase.");
    }

    const tasksData = [
      { id: 1, title: "ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„ (IDE)", desc: "ØªØ«Ø¨ÙŠØª Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¨Ø¯Ø¡.", link: "https://code.visualstudio.com/" },
      { id: 2, title: "Ø·Ø¨Ø§Ø¹Ø© Ø§ÙˆÙ„ Ù†Øµ Ù„Ùƒ", desc: "Ø£ÙˆÙ„ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù„Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©.", link: "./learn/languages.html" },
      { id: 3, title: "ÙÙ‡Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª", desc: "ÙƒÙŠÙ ÙŠØ®Ø²Ù† Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ", link: "./learn/languages.html" },
      { id: 4, title: "Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ©", desc: "Ø§Ù„Ø¬Ù…Ø¹ ÙˆØ§Ù„Ø·Ø±Ø­ ÙˆØ§Ù„Ø¶Ø±Ø¨ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹.", link: "./learn/languages.html" },
      { id: 5, title: "Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ù…Ù†Ø·Ù‚", desc: "Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯.", link: "./learn/languages.html" },
      { id: 6, title: "Ø§Ù„Ø­Ù„Ù‚Ø§Øª Ø§Ù„ØªÙƒØ±Ø§Ø±ÙŠØ©", desc: "ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯.", link: "./learn/languages.html" },
      { id: 7, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 7", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 8, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 8", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 9, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 9", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 10, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 10", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 11, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 11", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 12, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 12", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 13, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 13", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 14, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 14", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" },
      { id: 15, title: "Ø§ÙƒÙ…Ù„ Ø­ØªØ§ Ø§Ù„Ø¯Ø±Ø³ 15", desc: "Ø¨Ø¹Ø¯ Ø§ØªÙ‚Ø§Ù† Ø§Ù„Ø§Ø³Ø§Ø³ÙŠØ§Øª ÙŠØ¬Ø¨ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù„Ù„Ø§Ø­ØªØ±Ø§Ù", link: "./learn/languages.html" }
    ];
 

    let tasks = parseInt(localStorage.getItem('ishraq_tasks_done')) || 0;

    function render() {
      const container = document.getElementById('tasksContainer');
      container.innerHTML = '';

      tasksData.forEach((task, index) => {
        const isCompleted = index < tasks;
        const isActive = index === tasks;
        const isLocked = index > tasks;

        const item = document.createElement('div');
        item.className = `task-item ${isCompleted ? 'is-completed' : ''} ${isActive ? 'is-active' : ''}`;

        item.innerHTML = `
          <div class="task-number">${isCompleted ? 'âœ”' : task.id}</div>
          <div class="task-card ${isCompleted ? 'completed' : ''} ${isActive ? 'active' : ''}">
            <div class="task-info">
              <h5>${task.title}</h5>
              <p>${task.desc}</p>
              ${isActive ? `<button class="action-btn" onclick="goToTask('${task.link}')">Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø¢Ù†</button>` : ''}
              ${isCompleted ? `<p style="color: var(--success-green); font-weight: bold; margin-top:10px;">âœ… Ù…ÙƒØªÙ…Ù„Ø©</p>` : ''}
            </div>
            ${isLocked ? '<span class="lock-icon">ğŸ”’</span>' : ''}
          </div>
        `;
        container.appendChild(item);
      });

      updateProgressBar();
    }

    window.goToTask = function(url) {
     tasks = window.maxlanguage +1;
     localStorage.setItem('ishraq_tasks_done', tasks);
     render();

      // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø±Ø§Ø¨Ø·
      setTimeout(() => {
        window.location.href = url; // ÙØ¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ø¹Ù†Ø¯ Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø±ÙˆØ§Ø¨Ø·    
      }, 500);
    }

    function updateProgressBar() {
      const lineFill = document.getElementById('lineFill');
      const total = tasksData.length;
      if (tasks === 0) {
        lineFill.style.height = "0%";
      } else {
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠØªÙˆÙ‚Ù Ø§Ù„Ø®Ø· Ø¹Ù†Ø¯ Ø¢Ø®Ø± Ø¯Ø§Ø¦Ø±Ø© Ù…ÙƒØªÙ…Ù„Ø©
        const percentage = (Math.min(tasks - 1, total - 1) / (total - 1)) * 100;
        lineFill.style.height = `${percentage}%`;
      }
    }
    render();
  </script>
</body>
</html>